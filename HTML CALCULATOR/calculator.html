<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>HTML CALCULATOR|MINOR PROJECT2</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css">
        <style>
            .calc-btn{
                width:60px;
                height:60px;
            }
            .calc-display{
                background-color: grey;
                color: black;
                height: 100px;
                width: 310px;
                border-radius:5px;
            }
            .inputstring{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
            .expressionstring{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
            .valuestring{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
        </style>
    </head>
    <body>
        <div class="container p-5">
            <div class="d-flex justify-content-center">
                <div class="col-sm-12 col-md-4 col-lg-4">
                    <div class="card">
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 calc-display">
                                    <div id="number_div" class ="inputstring">0</div>
                                    <div id="expression" class ="expressionstring"></div>
                                    <div id="value_div"  class ="valuestring"></div>
                                </div>
                                <input type="hidden" id="savedExpression">
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3 p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="numlock"><small>num lock</small></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn"   data-event_key="CE">CE</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn"  data-event_key="delete">DEL</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="/">/</button>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3 p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn"  data-event_key="7">7</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn"  data-event_key="8">8</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="9">9</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="*">*</button>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="4">4</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="5">5</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="6">6</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="-">-</button>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="1">1</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="2">2</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="3">3</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="+">+</button>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                    <button type="button" class="btn btn-light calc-btn" style="width:150px;" data-event_key="0">0</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key=".">.</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="=">=</button>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js" integrity="sha512-2rNj2KJ+D8s1ceNasTIex6z4HWyOnEYLVC3FigGOmyQCZc2eBXKgOxQmo3oKLHyfcj53uz4QMsRCWNbLd32Q1g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        <script>
            $(document).on('keypress',function(e){
                $('button[data-event_key="'+e.key+'"]').addclass('active')
                if(e.keycode >=48 && e.keycode <= 57 || (e.keycode>=96 && e.keycode<=105)){
                    appendnumber(e.key)
                }else{
                    if(e.key=='+' || e.key=='-' || e.key=='/' || e.key=='*'){
                        generateexpression(e.key)
                    }else if(key == '='){
                        evaluateExpression()
                    }else if(key == 'delete'){
                        clearCalc()
                    }
                }
                console.log(e.key);
            })

            $(document).on('keyup',function(e){
                $('button[data-event_key="'+e.key+'"]').removeclass('active')
                console.log(e.key);
            })

            $('.calc-btn').on('click',function(e){
                var key = $(this).data('event_key')
                if(key != '+' && key != '-' && key != '=' && key != '*' && key != '/' && key != 'delete' && key != 'numlock'){
                    appendnumber(key)
                }else{
                    if(key=='+' || key=='-' || key=='/' || key=='*'){
                        generateExpression(key)
                    }else if(key == '='){
                        evaluateExpression()
                    }else if(key == 'delete'){
                        clearCalc()
                    }
                }
                console.log(key)
            })

            function appendnumber(number){
                var existingnumber = $("#number_div").html();
                console.log(existingnumber);
                var currentstring = number;
                var outpurstring = '';
                if(existingnumber != '' && existingnumber != undefined && existingnumber != null){
                    if(existingnumber=='0'){
                        outputstring = number
                    }else{
                        outputstring = existingnumber+=currentstring
                    }
                }else{
                    outputstring = currentstring;
                }
                $("#number_div").html(outputstring);
            }
            function generateExpression(operator){
                var existingnumber = $("#number_div").html();
                var currentoperator = operator;
                var expression = '';
                var savedExpression = $("#savedExpression").val();
                if(savedExpression=='' || savedExpression==null || savedExpression==undefined){
                    expression =parseInt(existingnumber) + operator
                }else{
                    expression =savedExpression +existingnumber + operator;
                }
                $("#number_div").html("")
                $("#savedExpression").val(expression)
                $("#expression").html(expression)
            }
            function evaluateExpression(){
                var result= '';
                var expression = $("#savedExpression").val();
                var existingnumber = $("#number_div").html();
                if(existingnumber != '' || existingnumber != null || existingnumber != undefined){
                    expression = expression + parseInt(existingnumber);
                    $("#expression").html(expression)
                }
                result = eval(expression);
                $("#savedExpression").val("")
                $("#number_div").html(result)
                $("#value_div").html(result)
            }
            function clearCalc(){
                $("#number_div").html("")
                $("#savedExpression").val("")
                $("#expression").html("")
                $("#value_div").html("")
            }
        </script>
    </body>
</html>